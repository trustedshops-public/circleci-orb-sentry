description: >
  Release with sourcemaps
parameters:
  release-name:
    description: Name of the release
    type: string
    default: "${CIRCLE_SHA1}-${CIRCLE_BUILD_NUM}"
  add-commits:
    description: Indicates if the release should contain commits
    type: boolean
    default: true
  sourcemaps-folder:
    description: Path to sourcemap folders
    type: string
  steps:
    description: Steps to run
    type: steps
  upload-sourcemaps-args:
    description: Additional arguments for uploading sourcemaps
    type: string
    default: ""
steps:
  - install-cli
  - create-release-with-sourcemaps:
      release-name: <<parameters.release-name>>
      add-commits: <<parameters.add-commits>>
      sourcemaps-folder: <<parameters.sourcemaps-folder>>
      upload-sourcemaps-args: <<parameters.upload-sourcemaps-args>>
  - <<parameters.steps>>
  - finalize-release:
      release-name: <<parameters.release-name>>
